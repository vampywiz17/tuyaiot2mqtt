FROM python:3

ARG ACCESS_ID
ARG ACCESS_KEY
ARG BROKER_ADDRESS
ARG BROKER_PORT
ARG USERNAME
ARG PASSWORD
ARG TOPIC
ARG MQ_ENDPOINT
ARG CLIENT_NAME

ENV ACCESS_ID=$ACCESS_ID
ENV ACCESS_KEY=$ACCESS_KEY
ENV BROKER_ADDRESS=$BROKER_ADDRESS
ENV BROKER_PORT=$BROKER_PORT
ENV USERNAME=$USERNAME
ENV PASSWORD=$PASSWORD
ENV TOPIC=$TOPIC
ENV MQ_ENDPOINT=$MQ_ENDPOINT
ENV CLIENT_NAME=$CLIENT_NAME

ADD tuyaiot2mqtt.py /

RUN pip install tuya-connector-python

RUN pip install paho-mqtt

CMD [ "python", "./tuyaiot2mqtt.py" ]
